# Generated by Django 4.2.28 on 2026-02-24 13:12

from decimal import Decimal
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('occupational_health', '0005_merge_20260224_1210'),
    ]

    operations = [
        migrations.CreateModel(
            name='AccessControl',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('resource_type', models.CharField(max_length=100)),
                ('permission_type', models.CharField(choices=[('view', 'View Only'), ('create', 'Create'), ('edit', 'Edit'), ('delete', 'Delete'), ('export', 'Export'), ('admin', 'Administrative')], max_length=20)),
                ('field_restrictions', models.JSONField(default=list, help_text='List of fields user cannot access (e.g., ["ssn", "medical_notes"])')),
                ('granted_date', models.DateTimeField(auto_now_add=True)),
                ('expires_date', models.DateField(blank=True, help_text='Access auto-revoked after this date', null=True)),
                ('active', models.BooleanField(default=True)),
                ('reason', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Access Control',
                'verbose_name_plural': 'Access Controls',
            },
        ),
        migrations.CreateModel(
            name='AccessRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('request_id', models.CharField(max_length=50, unique=True)),
                ('request_date', models.DateTimeField(auto_now_add=True)),
                ('requested_resource_type', models.CharField(max_length=100)),
                ('requested_permission', models.CharField(choices=[('view', 'View Only'), ('create', 'Create'), ('edit', 'Edit'), ('delete', 'Delete'), ('export', 'Export'), ('admin', 'Administrative')], max_length=20)),
                ('business_justification', models.TextField()),
                ('required_until', models.DateField(blank=True, help_text='Time-limited access', null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Approved'), ('denied', 'Denied'), ('revoked', 'Revoked')], default='pending', max_length=20)),
                ('approval_date', models.DateTimeField(blank=True, null=True)),
                ('approval_notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Access Request',
                'verbose_name_plural': 'Access Requests',
                'ordering': ['-request_date'],
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('login', 'User Login'), ('logout', 'User Logout'), ('data_view', 'Data View'), ('data_create', 'Data Create'), ('data_update', 'Data Update'), ('data_delete', 'Data Delete'), ('data_export', 'Data Export'), ('user_create', 'User Created'), ('user_update', 'User Updated'), ('user_delete', 'User Deleted'), ('permission_change', 'Permission Changed'), ('config_change', 'Configuration Changed'), ('api_access', 'API Access'), ('report_generated', 'Report Generated'), ('backup_created', 'Backup Created'), ('security_event', 'Security Event')], max_length=20)),
                ('resource_type', models.CharField(max_length=100)),
                ('resource_id', models.IntegerField(blank=True, null=True)),
                ('resource_name', models.CharField(blank=True, max_length=200)),
                ('description', models.TextField()),
                ('old_values', models.JSONField(blank=True, help_text='Previous values for updates', null=True)),
                ('new_values', models.JSONField(blank=True, help_text='New values for updates', null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('status', models.CharField(choices=[('success', 'Success'), ('failure', 'Failure'), ('warning', 'Warning')], default='success', max_length=20)),
                ('error_message', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Audit Log',
                'verbose_name_plural': 'Audit Logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceAudit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('audit_id', models.CharField(max_length=50, unique=True)),
                ('audit_type', models.CharField(choices=[('internal', 'Internal Audit'), ('management_review', 'Management Review'), ('external_certification', 'External Certification Audit'), ('regulatory', 'Regulatory Inspection'), ('third_party', 'Third-Party Audit')], max_length=30)),
                ('scheduled_date', models.DateField()),
                ('actual_date', models.DateField()),
                ('auditor_name', models.CharField(max_length=200)),
                ('auditor_qualification', models.TextField()),
                ('scope_description', models.TextField()),
                ('areas_audited', models.JSONField(default=list)),
                ('findings_summary', models.TextField()),
                ('total_findings', models.PositiveIntegerField()),
                ('conformities', models.PositiveIntegerField(default=0)),
                ('minor_nonconformities', models.PositiveIntegerField(default=0)),
                ('major_nonconformities', models.PositiveIntegerField(default=0)),
                ('observations', models.PositiveIntegerField(default=0)),
                ('audit_findings', models.JSONField(default=list)),
                ('corrective_action_plan', models.TextField()),
                ('corrective_actions_deadline', models.DateField()),
                ('corrective_actions_verified_date', models.DateField(blank=True, null=True)),
                ('verification_notes', models.TextField(blank=True)),
                ('audit_conclusion', models.TextField()),
            ],
            options={
                'verbose_name': 'Compliance Audit',
                'verbose_name_plural': 'Compliance Audits',
                'ordering': ['-actual_date'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceDashboard',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('audit_logs_created_last_30_days', models.PositiveIntegerField(default=0)),
                ('audit_log_completeness_percentage', models.PositiveIntegerField(default=0)),
                ('active_users', models.PositiveIntegerField(default=0)),
                ('users_with_expired_access', models.PositiveIntegerField(default=0)),
                ('access_reviews_due', models.PositiveIntegerField(default=0)),
                ('access_reviews_completed', models.PositiveIntegerField(default=0)),
                ('open_security_incidents', models.PositiveIntegerField(default=0)),
                ('security_incidents_last_30_days', models.PositiveIntegerField(default=0)),
                ('avg_incident_resolution_days', models.PositiveIntegerField(default=0)),
                ('known_vulnerabilities', models.PositiveIntegerField(default=0)),
                ('critical_vulnerabilities', models.PositiveIntegerField(default=0)),
                ('vulnerabilities_without_patch', models.PositiveIntegerField(default=0)),
                ('encrypted_fields_count', models.PositiveIntegerField(default=0)),
                ('unencrypted_sensitive_fields', models.PositiveIntegerField(default=0)),
                ('security_policies_up_to_date', models.BooleanField(default=False)),
                ('staff_security_training_completion', models.PositiveIntegerField(default=0)),
                ('incident_response_tests_completed', models.PositiveIntegerField(default=0)),
                ('overall_compliance_percentage', models.PositiveIntegerField(default=0)),
                ('compliance_status', models.CharField(choices=[('compliant', 'Compliant'), ('mostly_compliant', 'Mostly Compliant'), ('partially_compliant', 'Partially Compliant'), ('non_compliant', 'Non-Compliant')], default='partially_compliant', max_length=20)),
            ],
            options={
                'verbose_name': 'Compliance Dashboard',
                'verbose_name_plural': 'Compliance Dashboards',
            },
        ),
        migrations.CreateModel(
            name='ContractorQualification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('contractor_id', models.CharField(max_length=50, unique=True)),
                ('company_name', models.CharField(max_length=200)),
                ('contact_person', models.CharField(max_length=200)),
                ('contact_email', models.EmailField(max_length=254)),
                ('contact_phone', models.CharField(max_length=20)),
                ('work_description', models.TextField()),
                ('contract_start_date', models.DateField()),
                ('contract_end_date', models.DateField()),
                ('insurance_certificate_provided', models.BooleanField(default=False)),
                ('ohs_policy_provided', models.BooleanField(default=False)),
                ('risk_assessment_provided', models.BooleanField(default=False)),
                ('worker_competence_verified', models.BooleanField(default=False)),
                ('equipment_certification_verified', models.BooleanField(default=False)),
                ('safety_score', models.PositiveIntegerField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending_review', 'Pending Review'), ('approved', 'Approved'), ('conditional_approval', 'Conditional Approval'), ('rejected', 'Rejected'), ('suspended', 'Suspended')], default='pending_review', max_length=30)),
                ('status_notes', models.TextField(blank=True)),
                ('induction_required', models.BooleanField(default=True)),
                ('induction_completed_date', models.DateField(blank=True, null=True)),
                ('site_rules_acknowledgement', models.BooleanField(default=False)),
                ('emergency_procedures_briefing', models.BooleanField(default=False)),
                ('last_review_date', models.DateField()),
                ('next_review_date', models.DateField()),
            ],
            options={
                'verbose_name': 'Contractor Qualification',
                'verbose_name_plural': 'Contractor Qualifications',
            },
        ),
        migrations.CreateModel(
            name='DataRetentionPolicy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_category', models.CharField(max_length=100, unique=True)),
                ('retention_days', models.PositiveIntegerField()),
                ('description', models.TextField()),
                ('archive_before_delete', models.BooleanField(default=True)),
                ('archive_location', models.CharField(blank=True, max_length=200)),
                ('notify_before_delete_days', models.PositiveIntegerField(default=30)),
                ('enabled', models.BooleanField(default=True)),
                ('created_date', models.DateField(auto_now_add=True)),
                ('last_executed', models.DateTimeField(blank=True, null=True)),
                ('records_purged', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Data Retention Policy',
                'verbose_name_plural': 'Data Retention Policies',
            },
        ),
        migrations.CreateModel(
            name='EmergencyDrill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('drill_id', models.CharField(max_length=50, unique=True)),
                ('scheduled_date', models.DateField()),
                ('actual_date', models.DateField()),
                ('duration_minutes', models.PositiveIntegerField()),
                ('participants_count', models.PositiveIntegerField()),
                ('objectives', models.TextField()),
                ('observations', models.TextField()),
                ('effectiveness_rating', models.CharField(choices=[('excellent', 'Excellent'), ('good', 'Good'), ('satisfactory', 'Satisfactory'), ('needs_improvement', 'Needs Improvement')], max_length=20)),
                ('areas_for_improvement', models.TextField(blank=True)),
                ('corrective_actions_identified', models.TextField(blank=True)),
                ('next_drill_date', models.DateField()),
            ],
            options={
                'verbose_name': 'Emergency Drill',
                'verbose_name_plural': 'Emergency Drills',
                'ordering': ['-actual_date'],
            },
        ),
        migrations.CreateModel(
            name='EmergencyProcedure',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('procedure_code', models.CharField(max_length=50, unique=True)),
                ('emergency_type', models.CharField(choices=[('fire', 'Fire Emergency'), ('medical', 'Medical Emergency'), ('chemical_spill', 'Chemical Spill'), ('evacuation', 'Evacuation'), ('active_threat', 'Active Threat'), ('utility_failure', 'Utility Failure'), ('natural_disaster', 'Natural Disaster'), ('other', 'Other Emergency')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('procedure_steps', models.JSONField(default=list)),
                ('roles_and_responsibilities', models.TextField()),
                ('assembly_point_location', models.CharField(blank=True, max_length=200)),
                ('evacuation_routes', models.TextField(blank=True)),
                ('emergency_contacts', models.JSONField(default=list)),
                ('external_contacts', models.JSONField(default=list)),
                ('emergency_equipment', models.JSONField(default=list)),
                ('created_date', models.DateField(auto_now_add=True)),
                ('last_reviewed_date', models.DateField()),
                ('next_review_date', models.DateField()),
                ('version', models.CharField(default='1.0', max_length=20)),
            ],
            options={
                'verbose_name': 'Emergency Procedure',
                'verbose_name_plural': 'Emergency Procedures',
            },
        ),
        migrations.CreateModel(
            name='EncryptionKeyRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('key_id', models.CharField(max_length=50, unique=True)),
                ('purpose', models.CharField(max_length=100)),
                ('algorithm', models.CharField(max_length=50)),
                ('status', models.CharField(choices=[('active', 'Active'), ('rotated', 'Rotated'), ('revoked', 'Revoked'), ('archived', 'Archived')], default='active', max_length=20)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('rotation_date', models.DateTimeField(blank=True, null=True)),
                ('next_rotation_date', models.DateTimeField()),
                ('rotation_count', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Encryption Key Record',
                'verbose_name_plural': 'Encryption Key Records',
                'ordering': ['-created_date'],
            },
        ),
        migrations.CreateModel(
            name='HazardRegister',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('hazard_id', models.CharField(max_length=50, unique=True)),
                ('hazard_type', models.CharField(choices=[('physical', 'Physical Hazard'), ('chemical', 'Chemical Hazard'), ('biological', 'Biological Hazard'), ('ergonomic', 'Ergonomic Hazard'), ('psychosocial', 'Psychosocial Hazard'), ('environmental', 'Environmental Hazard')], max_length=20)),
                ('description', models.TextField()),
                ('location', models.CharField(max_length=200)),
                ('potential_harm', models.TextField()),
                ('affected_workers_count', models.PositiveIntegerField()),
                ('affected_job_categories', models.JSONField(default=list)),
                ('elimination_controls', models.TextField(blank=True)),
                ('substitution_controls', models.TextField(blank=True)),
                ('engineering_controls', models.TextField(blank=True)),
                ('administrative_controls', models.TextField(blank=True)),
                ('ppe_controls', models.TextField(blank=True)),
                ('probability_before', models.PositiveIntegerField()),
                ('severity_before', models.PositiveIntegerField()),
                ('risk_score_before', models.PositiveIntegerField()),
                ('probability_after', models.PositiveIntegerField()),
                ('severity_after', models.PositiveIntegerField()),
                ('risk_score_after', models.PositiveIntegerField()),
                ('control_effectiveness', models.CharField(choices=[('excellent', 'Excellent - Risk eliminated'), ('good', 'Good - Risk significantly reduced'), ('fair', 'Fair - Risk moderately reduced'), ('poor', 'Poor - Risk minimally reduced'), ('ineffective', 'Ineffective - No risk reduction')], max_length=20)),
                ('residual_risk_acceptable', models.BooleanField(default=False)),
                ('identified_date', models.DateField(auto_now_add=True)),
                ('last_review_date', models.DateField()),
                ('next_review_date', models.DateField()),
                ('related_incidents_count', models.PositiveIntegerField(default=0)),
                ('last_incident_date', models.DateField(blank=True, null=True)),
                ('active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Hazard Register',
                'verbose_name_plural': 'Hazard Registers',
                'ordering': ['-identified_date'],
            },
        ),
        migrations.CreateModel(
            name='HealthSurveillance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('program_id', models.CharField(max_length=50, unique=True)),
                ('program_type', models.CharField(choices=[('baseline', 'Baseline Health Assessment'), ('periodic', 'Periodic Medical Examination'), ('exit', 'Exit Examination'), ('return_to_work', 'Return to Work Assessment'), ('targeted', 'Targeted Health Assessment')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('target_job_categories', models.JSONField(default=list)),
                ('target_hazards', models.JSONField(default=list)),
                ('scheduled_frequency', models.CharField(choices=[('on_hire', 'On Hire'), ('annual', 'Annual'), ('biennial', 'Every 2 Years'), ('on_exposure_change', 'On Exposure Change')], max_length=50)),
                ('tests_included', models.JSONField(default=list)),
                ('participants_scheduled', models.PositiveIntegerField(default=0)),
                ('participants_examined', models.PositiveIntegerField(default=0)),
                ('abnormal_findings_count', models.PositiveIntegerField(default=0)),
                ('referrals_made', models.PositiveIntegerField(default=0)),
                ('program_start_date', models.DateField()),
                ('program_end_date', models.DateField(blank=True, null=True)),
                ('responsible_medical_professional', models.CharField(max_length=200)),
                ('effectiveness_assessed', models.BooleanField(default=False)),
                ('effectiveness_notes', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Health Surveillance',
                'verbose_name_plural': 'Health Surveillance Programs',
            },
        ),
        migrations.CreateModel(
            name='IncidentInvestigation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('investigation_id', models.CharField(max_length=50, unique=True)),
                ('status', models.CharField(choices=[('reported', 'Reported'), ('under_investigation', 'Under Investigation'), ('root_cause_identified', 'Root Cause Identified'), ('corrective_action_planned', 'Corrective Action Planned'), ('corrective_action_implemented', 'Corrective Action Implemented'), ('effectiveness_verified', 'Effectiveness Verified'), ('closed', 'Closed')], default='reported', max_length=30)),
                ('investigation_date', models.DateField()),
                ('investigation_findings', models.TextField()),
                ('rca_method', models.CharField(choices=[('5why', '5-Why Analysis'), ('fishbone', 'Fishbone Diagram'), ('fault_tree', 'Fault Tree Analysis'), ('timeline', 'Timeline Analysis'), ('other', 'Other')], max_length=50)),
                ('rca_documentation', models.TextField(help_text='Detailed root cause analysis results')),
                ('root_causes', models.JSONField(default=list)),
                ('contributing_factors', models.JSONField(default=list)),
                ('corrective_actions', models.TextField()),
                ('corrective_action_deadline', models.DateField()),
                ('corrective_action_implemented_date', models.DateField(blank=True, null=True)),
                ('preventive_actions', models.TextField(blank=True)),
                ('preventive_action_deadline', models.DateField(blank=True, null=True)),
                ('effectiveness_check_date', models.DateField(blank=True, null=True)),
                ('effectiveness_verified', models.BooleanField(default=False)),
                ('effectiveness_notes', models.TextField(blank=True)),
                ('completion_date', models.DateField(blank=True, null=True)),
                ('lessons_learned', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Incident Investigation',
                'verbose_name_plural': 'Incident Investigations',
                'ordering': ['-investigation_date'],
            },
        ),
        migrations.CreateModel(
            name='ManagementReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('review_id', models.CharField(max_length=50, unique=True)),
                ('review_period', models.CharField(max_length=50)),
                ('review_date', models.DateField()),
                ('next_review_date', models.DateField()),
                ('kpi_summary', models.TextField()),
                ('incident_summary', models.TextField()),
                ('audit_findings_summary', models.TextField()),
                ('nonconformity_status', models.TextField()),
                ('corrective_action_status', models.TextField()),
                ('worker_feedback_summary', models.TextField()),
                ('contractor_feedback_summary', models.TextField()),
                ('customer_complaints', models.PositiveIntegerField(default=0)),
                ('regulatory_feedback', models.TextField(blank=True)),
                ('policy_changes_required', models.TextField(blank=True)),
                ('objectives_changes_required', models.TextField(blank=True)),
                ('resource_allocation_changes', models.TextField(blank=True)),
                ('management_conclusions', models.TextField()),
                ('action_items', models.JSONField(default=list)),
                ('ohs_system_effectiveness', models.CharField(choices=[('highly_effective', 'Highly Effective'), ('effective', 'Effective'), ('moderately_effective', 'Moderately Effective'), ('needs_improvement', 'Needs Improvement')], max_length=20)),
            ],
            options={
                'verbose_name': 'Management Review',
                'verbose_name_plural': 'Management Reviews',
                'ordering': ['-review_date'],
            },
        ),
        migrations.CreateModel(
            name='OHSPolicy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('policy_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('full_text', models.TextField()),
                ('version', models.CharField(max_length=20)),
                ('effective_date', models.DateField()),
                ('review_date', models.DateField()),
                ('next_review_date', models.DateField()),
                ('publication_date', models.DateTimeField(auto_now_add=True)),
                ('revision_history', models.JSONField(default=list)),
                ('scope', models.TextField(help_text='Who and what this policy applies to')),
                ('objectives', models.TextField(help_text='Policy objectives and goals')),
                ('communication_plan', models.TextField(help_text='How policy is communicated to workers')),
                ('training_plan', models.TextField(help_text='Training requirements for policy understanding')),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'OH&S Policy',
                'verbose_name_plural': 'OH&S Policies',
                'ordering': ['-effective_date'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceIndicator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('indicator_code', models.CharField(max_length=50, unique=True)),
                ('indicator_name', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('indicator_type', models.CharField(choices=[('leading', 'Leading Indicator'), ('lagging', 'Lagging Indicator')], max_length=20)),
                ('target_value', models.DecimalField(decimal_places=2, max_digits=10)),
                ('target_unit', models.CharField(max_length=100)),
                ('acceptable_lower_bound', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('acceptable_upper_bound', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('measurement_frequency', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('annually', 'Annually')], max_length=50)),
                ('data_source', models.TextField()),
                ('calculation_method', models.TextField()),
                ('previous_values', models.JSONField(default=list)),
                ('current_value', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('last_measurement_date', models.DateField(blank=True, null=True)),
                ('trend', models.CharField(choices=[('improving', 'Improving'), ('stable', 'Stable'), ('worsening', 'Worsening'), ('insufficient_data', 'Insufficient Data')], default='insufficient_data', max_length=20)),
            ],
            options={
                'verbose_name': 'Performance Indicator',
                'verbose_name_plural': 'Performance Indicators',
            },
        ),
        migrations.CreateModel(
            name='SafetyTraining',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('training_code', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('training_type', models.CharField(choices=[('induction', 'Safety Induction'), ('task_specific', 'Task-Specific Training'), ('hazard_awareness', 'Hazard Awareness'), ('equipment', 'Equipment Operation'), ('emergency', 'Emergency Response'), ('first_aid', 'First Aid'), ('fire', 'Fire Safety'), ('confined_space', 'Confined Space'), ('heights', 'Work at Heights'), ('management', 'OH&S Management'), ('auditor', 'Auditor Training'), ('other', 'Other')], max_length=20)),
                ('duration_hours', models.PositiveIntegerField()),
                ('delivery_method', models.CharField(choices=[('classroom', 'Classroom'), ('online', 'Online'), ('onsite', 'On-Site'), ('blended', 'Blended'), ('hands_on', 'Hands-On')], max_length=50)),
                ('mandatory', models.BooleanField(default=False)),
                ('mandatory_frequency', models.CharField(blank=True, choices=[('once', 'Once'), ('annual', 'Annual'), ('biennial', 'Every 2 Years'), ('triennial', 'Every 3 Years'), ('as_needed', 'As Needed')], max_length=50)),
                ('applicable_job_categories', models.JSONField(default=list)),
                ('applicable_hazards', models.JSONField(default=list)),
                ('trainer_requirements', models.TextField()),
                ('course_materials', models.URLField(blank=True)),
                ('created_date', models.DateField(auto_now_add=True)),
                ('version', models.CharField(default='1.0', max_length=20)),
            ],
            options={
                'verbose_name': 'Safety Training',
                'verbose_name_plural': 'Safety Trainings',
            },
        ),
        migrations.CreateModel(
            name='SecurityIncident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('incident_id', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('discovery_date', models.DateTimeField()),
                ('report_date', models.DateTimeField(auto_now_add=True)),
                ('severity', models.CharField(choices=[('low', 'Low - No data exposed'), ('medium', 'Medium - Minimal data exposure'), ('high', 'High - Significant data exposure'), ('critical', 'Critical - Large-scale data breach')], max_length=20)),
                ('status', models.CharField(choices=[('reported', 'Reported'), ('investigating', 'Investigating'), ('contained', 'Contained'), ('resolved', 'Resolved'), ('closed', 'Closed')], default='reported', max_length=20)),
                ('affected_systems', models.JSONField(default=list)),
                ('affected_users_count', models.PositiveIntegerField(default=0)),
                ('affected_data_types', models.JSONField(default=list)),
                ('root_cause', models.TextField(blank=True)),
                ('contained_date', models.DateTimeField(blank=True, null=True)),
                ('resolution_date', models.DateTimeField(blank=True, null=True)),
                ('corrective_actions', models.TextField(blank=True)),
                ('preventive_actions', models.TextField(blank=True)),
                ('external_reporting', models.BooleanField(default=False, help_text='Reported to authorities')),
                ('external_report_date', models.DateField(blank=True, null=True)),
                ('external_report_details', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Security Incident',
                'verbose_name_plural': 'Security Incidents',
                'ordering': ['-report_date'],
            },
        ),
        migrations.CreateModel(
            name='TrainingCertification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('completion_date', models.DateField()),
                ('trainer', models.CharField(max_length=200)),
                ('trainer_qualification', models.TextField()),
                ('score', models.PositiveIntegerField(blank=True, null=True)),
                ('certificate_number', models.CharField(blank=True, max_length=100)),
                ('expiry_date', models.DateField(blank=True, null=True)),
                ('renewal_reminder_sent', models.BooleanField(default=False)),
                ('renewal_completion_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('scheduled', 'Scheduled'), ('completed', 'Completed'), ('expired', 'Expired'), ('renewal_due', 'Renewal Due')], default='completed', max_length=20)),
            ],
            options={
                'verbose_name': 'Training Certification',
                'verbose_name_plural': 'Training Certifications',
                'ordering': ['-completion_date'],
            },
        ),
        migrations.CreateModel(
            name='VulnerabilityRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vulnerability_id', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('affected_component', models.CharField(max_length=200)),
                ('current_version', models.CharField(max_length=50)),
                ('vulnerable_versions', models.CharField(max_length=200)),
                ('patched_version', models.CharField(blank=True, max_length=50)),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], max_length=20)),
                ('published_date', models.DateField()),
                ('discovered_date', models.DateField(auto_now_add=True)),
                ('status', models.CharField(choices=[('identified', 'Identified'), ('verified', 'Verified'), ('scheduled', 'Patch Scheduled'), ('patched', 'Patched'), ('verified_fixed', 'Verified Fixed'), ('accepted_risk', 'Risk Accepted'), ('closed', 'Closed')], default='identified', max_length=20)),
                ('remediation_plan', models.TextField()),
                ('patch_date', models.DateField(blank=True, null=True)),
                ('verification_date', models.DateField(blank=True, null=True)),
                ('risk_acceptance_date', models.DateField(blank=True, null=True)),
                ('risk_acceptance_reason', models.TextField(blank=True)),
                ('external_reference', models.URLField(blank=True)),
            ],
            options={
                'verbose_name': 'Vulnerability Record',
                'verbose_name_plural': 'Vulnerability Records',
                'ordering': ['-severity', '-published_date'],
            },
        ),
        migrations.CreateModel(
            name='WorkerFeedback',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('feedback_id', models.CharField(max_length=50, unique=True)),
                ('feedback_type', models.CharField(choices=[('hazard_report', 'Hazard Report'), ('near_miss_report', 'Near Miss Report'), ('safety_suggestion', 'Safety Suggestion'), ('incident_report', 'Incident Report')], max_length=30)),
                ('submitted_date', models.DateTimeField(auto_now_add=True)),
                ('anonymous', models.BooleanField(default=False)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('location', models.CharField(max_length=200)),
                ('potential_harm', models.TextField(blank=True)),
                ('suggested_solution', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('submitted', 'Submitted'), ('acknowledged', 'Acknowledged'), ('under_review', 'Under Review'), ('action_taken', 'Action Taken'), ('closed', 'Closed')], default='submitted', max_length=20)),
                ('acknowledged_date', models.DateTimeField(blank=True, null=True)),
                ('acknowledgement_message', models.TextField(blank=True)),
                ('action_taken', models.TextField(blank=True)),
                ('action_completion_date', models.DateField(blank=True, null=True)),
                ('effectiveness_notes', models.TextField(blank=True)),
                ('follow_up_message', models.TextField(blank=True)),
                ('follow_up_date', models.DateField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Worker Feedback',
                'verbose_name_plural': 'Worker Feedback',
                'ordering': ['-submitted_date'],
            },
        ),
        migrations.AlterModelOptions(
            name='drcregulatoryreport',
            options={'ordering': ['-submitted_date'], 'verbose_name': 'DRC Report', 'verbose_name_plural': 'DRC Reports'},
        ),
        migrations.AlterModelOptions(
            name='regulatorycnssreport',
            options={'ordering': ['-prepared_date'], 'verbose_name': 'CNSS Report', 'verbose_name_plural': 'CNSS Reports'},
        ),
        migrations.RemoveConstraint(
            model_name='hierarchyofcontrols',
            name='unique_hoc_hazard_level_name',
        ),
        migrations.RemoveConstraint(
            model_name='riskheatmapdata',
            name='unique_heatmap_cell',
        ),
        migrations.RemoveConstraint(
            model_name='riskheatmapreport',
            name='unique_heatmap_report',
        ),
        migrations.RemoveField(
            model_name='drcregulatoryreport',
            name='response_deadline',
        ),
        migrations.RemoveField(
            model_name='exitexamination',
            name='cnss_reference_number',
        ),
        migrations.RemoveField(
            model_name='exitexamination',
            name='worker_compensation_claim',
        ),
        migrations.RemoveField(
            model_name='overexposurealert',
            name='measurement_method',
        ),
        migrations.RemoveField(
            model_name='overexposurealert',
            name='measurement_unit',
        ),
        migrations.RemoveField(
            model_name='overexposurealert',
            name='medical_followup_scheduled',
        ),
        migrations.RemoveField(
            model_name='overexposurealert',
            name='resolved_by',
        ),
        migrations.RemoveField(
            model_name='overexposurealert',
            name='threshold',
        ),
        migrations.RemoveField(
            model_name='ppecompliancerecord',
            name='notes',
        ),
        migrations.RemoveField(
            model_name='regulatorycnssreport',
            name='cnss_acknowledge_number',
        ),
        migrations.RemoveField(
            model_name='workerriskprofile',
            name='created',
        ),
        migrations.RemoveField(
            model_name='workerriskprofile',
            name='intervention_required',
        ),
        migrations.AddField(
            model_name='drcregulatoryreport',
            name='authority_response_date',
            field=models.DateField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='drcregulatoryreport',
            name='content_json',
            field=models.JSONField(default=dict),
        ),
        migrations.AddField(
            model_name='exitexamination',
            name='compensation_claim_filed',
            field=models.BooleanField(default=False),
        ),
        migrations.AddField(
            model_name='exitexamination',
            name='followup_frequency_months',
            field=models.PositiveIntegerField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='exitexamination',
            name='last_work_date',
            field=models.DateField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='exitexamination',
            name='records_provided_date',
            field=models.DateField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='exitexamination',
            name='records_provided_to_worker',
            field=models.BooleanField(default=False),
        ),
        migrations.AddField(
            model_name='overexposurealert',
            name='action_taken',
            field=models.TextField(blank=True),
        ),
        migrations.AddField(
            model_name='overexposurealert',
            name='exposure_threshold',
            field=models.DecimalField(decimal_places=2, default=0, max_digits=8),
        ),
        migrations.AddField(
            model_name='overexposurealert',
            name='medical_followup_date',
            field=models.DateField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name='overexposurealert',
            name='medical_followup_required',
            field=models.BooleanField(default=False),
        ),
        migrations.AddField(
            model_name='overexposurealert',
            name='unit_measurement',
            field=models.CharField(default='unknown', max_length=50),
        ),
        migrations.AddField(
            model_name='ppecompliancerecord',
            name='condition_notes',
            field=models.TextField(blank=True),
        ),
        migrations.AddField(
            model_name='ppecompliancerecord',
            name='corrective_action_required',
            field=models.BooleanField(default=False),
        ),
        migrations.AddField(
            model_name='regulatorycnssreport',
            name='cnss_acknowledgment_number',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AddField(
            model_name='regulatorycnssreport',
            name='notes',
            field=models.TextField(blank=True),
        ),
        migrations.AddField(
            model_name='regulatorycnssreport',
            name='updated_at',
            field=models.DateTimeField(auto_now=True),
        ),
        migrations.AddField(
            model_name='workerriskprofile',
            name='calculated_by_system',
            field=models.BooleanField(default=True),
        ),
        migrations.AddField(
            model_name='workerriskprofile',
            name='manual_notes',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='drcregulatoryreport',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='drc_reports', to='occupational_health.enterprise'),
        ),
        migrations.AlterField(
            model_name='drcregulatoryreport',
            name='report_type',
            field=models.CharField(choices=[('monthly_incident', 'Monthly Incidents'), ('quarterly_health', 'Quarterly Health'), ('annual_compliance', 'Annual Compliance'), ('fatal_incident', 'Fatal Incident'), ('severe_incident', 'Severe Incident'), ('occupational_disease_notice', 'Disease Notice')], max_length=100),
        ),
        migrations.AlterField(
            model_name='drcregulatoryreport',
            name='status',
            field=models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='draft', max_length=50),
        ),
        migrations.AlterField(
            model_name='drcregulatoryreport',
            name='submission_method',
            field=models.CharField(blank=True, max_length=50),
        ),
        migrations.AlterField(
            model_name='drcregulatoryreport',
            name='submitted_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='drc_reports_submitted', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='alcohol_level',
            field=models.DecimalField(blank=True, decimal_places=3, max_digits=5, null=True),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='alcohol_result',
            field=models.CharField(choices=[('negative', 'Negative'), ('positive', 'Positive'), ('presumptive', 'Presumptive'), ('invalid', 'Invalid')], default='negative', max_length=20),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='confirmation_result',
            field=models.CharField(blank=True, choices=[('negative', 'Negative'), ('positive', 'Positive'), ('presumptive', 'Presumptive'), ('invalid', 'Invalid')], max_length=20, null=True),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='drug_result',
            field=models.CharField(choices=[('negative', 'Negative'), ('positive', 'Positive'), ('presumptive', 'Presumptive'), ('invalid', 'Invalid')], default='negative', max_length=20),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='fit_for_duty',
            field=models.BooleanField(default=True),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='restrictions',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='specific_substances_detected',
            field=models.CharField(blank=True, max_length=200),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='substances_tested',
            field=models.CharField(blank=True, max_length=200),
        ),
        migrations.AlterField(
            model_name='drugalcoholscreening',
            name='test_type',
            field=models.CharField(choices=[('urine', 'Urine'), ('breath', 'Breath'), ('blood', 'Blood'), ('oral_fluid', 'Oral Fluid')], max_length=20),
        ),
        migrations.AlterField(
            model_name='exitexamination',
            name='examiner',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='exit_exams_conducted', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='exitexamination',
            name='reason_for_exit',
            field=models.CharField(choices=[('retirement', 'Retirement'), ('resignation', 'Resignation'), ('termination', 'Termination'), ('contract_end', 'Contract End'), ('transfer', 'Transfer'), ('other', 'Other')], max_length=50),
        ),
        migrations.AlterField(
            model_name='exitexamination',
            name='worker',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='exit_examination', to='occupational_health.worker'),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='decision_basis',
            field=models.CharField(choices=[('medical_exam', 'Medical Exam'), ('test_results', 'Test Results'), ('xray', 'X-Ray'), ('drug_alcohol', 'Drug/Alcohol'), ('heavy_metals', 'Heavy Metals'), ('mental_health', 'Mental Health'), ('ergonomic', 'Ergonomic'), ('combination', 'Combination')], max_length=20),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='fitness_status',
            field=models.CharField(choices=[('fit', 'Fit'), ('fit_with_restrictions', 'Fit with Restrictions'), ('temporarily_unfit', 'Temporarily Unfit'), ('permanently_unfit', 'Permanently Unfit')], max_length=25),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='recommended_interventions',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='required_accommodations',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='safety_sensitive',
            field=models.BooleanField(default=False),
        ),
        migrations.AlterField(
            model_name='fitnesscertificationdecision',
            name='work_restrictions',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='heavymetalstest',
            name='clinical_significance',
            field=models.CharField(blank=True, max_length=200),
        ),
        migrations.AlterField(
            model_name='heavymetalstest',
            name='heavy_metal',
            field=models.CharField(choices=[('lead', 'Lead'), ('mercury', 'Mercury'), ('cadmium', 'Cadmium'), ('cobalt', 'Cobalt'), ('chromium', 'Chromium'), ('nickel', 'Nickel'), ('manganese', 'Manganese'), ('arsenic', 'Arsenic'), ('beryllium', 'Beryllium'), ('aluminum', 'Aluminum')], max_length=20),
        ),
        migrations.AlterField(
            model_name='heavymetalstest',
            name='level_value',
            field=models.DecimalField(decimal_places=4, max_digits=10),
        ),
        migrations.AlterField(
            model_name='heavymetalstest',
            name='occupational_exposure',
            field=models.BooleanField(default=True),
        ),
        migrations.AlterField(
            model_name='heavymetalstest',
            name='unit',
            field=models.CharField(max_length=20),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='control_level',
            field=models.IntegerField(choices=[(1, 'Elimination'), (2, 'Substitution'), (3, 'Engineering'), (4, 'Administrative'), (5, 'PPE')]),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='effectiveness_rating',
            field=models.CharField(blank=True, choices=[('excellent', 'Excellent'), ('good', 'Good'), ('fair', 'Fair'), ('poor', 'Poor'), ('unknown', 'Unknown')], max_length=20),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='estimated_cost',
            field=models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='estimated_timeline',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='residual_risk_score',
            field=models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(100)]),
        ),
        migrations.AlterField(
            model_name='hierarchyofcontrols',
            name='risk_reduction_percentage',
            field=models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)]),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='acknowledged_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='alerts_acknowledged', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='exposure_level',
            field=models.DecimalField(decimal_places=2, default=0, max_digits=8),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='exposure_type',
            field=models.CharField(default='unknown', max_length=100),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='recommended_action',
            field=models.TextField(default=''),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='severity',
            field=models.CharField(choices=[('warning', 'Warning'), ('critical', 'Critical'), ('emergency', 'Emergency')], default='warning', max_length=20),
        ),
        migrations.AlterField(
            model_name='overexposurealert',
            name='worker',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='overexposure_alerts', to='occupational_health.worker'),
        ),
        migrations.AlterField(
            model_name='ppecompliancerecord',
            name='approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ppe_compliance_approvals', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='ppecompliancerecord',
            name='checked_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ppe_compliance_checks', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='ppecompliancerecord',
            name='non_compliance_reason',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='ppecompliancerecord',
            name='ppe_item',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='compliance_records', to='occupational_health.ppeitem'),
        ),
        migrations.AlterField(
            model_name='ppecompliancerecord',
            name='status',
            field=models.CharField(choices=[('in_use', 'In Use'), ('expired', 'Expired'), ('damaged', 'Damaged'), ('lost', 'Lost'), ('replaced', 'Replaced'), ('compliant', 'Compliant'), ('non_compliant', 'Non-Compliant')], max_length=50),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='content_json',
            field=models.JSONField(default=dict),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cnss_reports', to='occupational_health.enterprise'),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='prepared_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cnss_reports_prepared', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='prepared_date',
            field=models.DateTimeField(auto_now_add=True),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='related_disease',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cnss_reports', to='occupational_health.occupationaldisease'),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='related_incident',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cnss_reports', to='occupational_health.workplaceincident'),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='report_type',
            field=models.CharField(choices=[('incident', 'Incident'), ('occupational_disease', 'Disease'), ('fatality', 'Fatality'), ('monthly_stats', 'Monthly Stats')], max_length=50),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='status',
            field=models.CharField(choices=[('draft', 'Draft'), ('ready_for_submission', 'Ready'), ('submitted', 'Submitted'), ('acknowledged', 'Acknowledged'), ('rejected', 'Rejected'), ('approved', 'Approved')], default='draft', max_length=50),
        ),
        migrations.AlterField(
            model_name='regulatorycnssreport',
            name='submission_method',
            field=models.CharField(blank=True, max_length=50),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='controls_effective_percentage',
            field=models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)]),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='controls_implemented',
            field=models.IntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='incidents_count',
            field=models.IntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='near_misses_count',
            field=models.IntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='period',
            field=models.CharField(blank=True, max_length=50),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='previous_period_score',
            field=models.IntegerField(blank=True, null=True),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='priority',
            field=models.CharField(choices=[('critical', 'Critical'), ('high', 'High'), ('medium', 'Medium'), ('low', 'Low')], default='medium', max_length=20),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='probability_level',
            field=models.IntegerField(choices=[(1, 'Remote'), (2, 'Low'), (3, 'Medium'), (4, 'High'), (5, 'Very High')]),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='risk_score',
            field=models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(25)]),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='risk_zone',
            field=models.CharField(choices=[('green', 'Green'), ('yellow', 'Yellow'), ('orange', 'Orange'), ('red', 'Red')], max_length=20),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='severity_level',
            field=models.IntegerField(choices=[(1, 'Negligible'), (2, 'Minor'), (3, 'Moderate'), (4, 'Severe'), (5, 'Catastrophic')]),
        ),
        migrations.AlterField(
            model_name='riskheatmapdata',
            name='trend',
            field=models.CharField(blank=True, choices=[('improving', 'Improving'), ('stable', 'Stable'), ('worsening', 'Worsening')], max_length=20),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='average_risk_score',
            field=models.DecimalField(decimal_places=2, max_digits=5),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='critical_cells',
            field=models.IntegerField(),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='high_risk_cells',
            field=models.IntegerField(),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='incident_trend',
            field=models.CharField(choices=[('up', 'Up'), ('down', 'Down'), ('stable', 'Stable')], max_length=20),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='low_risk_cells',
            field=models.IntegerField(),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='medium_risk_cells',
            field=models.IntegerField(),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='period',
            field=models.CharField(max_length=50),
        ),
        migrations.AlterField(
            model_name='riskheatmapreport',
            name='total_heatmap_cells',
            field=models.IntegerField(default=25),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='abnormal_findings_count',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='age_risk_factor',
            field=models.DecimalField(decimal_places=2, default=Decimal('1.0'), max_digits=5),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='compliance_risk_score',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='days_overdue',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='exposure_risk_score',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='exposure_years_factor',
            field=models.DecimalField(decimal_places=2, default=Decimal('1.0'), max_digits=5),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='fitness_status_factor',
            field=models.DecimalField(decimal_places=2, default=Decimal('1.0'), max_digits=5),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='health_risk_score',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='incidents_last_12months',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='intervention_type',
            field=models.CharField(blank=True, max_length=200),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='medical_history_factor',
            field=models.DecimalField(decimal_places=2, default=Decimal('1.0'), max_digits=5),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='near_misses_last_12months',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='overall_risk_score',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='ppe_compliance_factor',
            field=models.DecimalField(decimal_places=2, default=Decimal('1.0'), max_digits=5),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='priority_actions',
            field=models.TextField(blank=True),
        ),
        migrations.AlterField(
            model_name='workerriskprofile',
            name='worker',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='risk_profile', to='occupational_health.worker'),
        ),
        migrations.AlterField(
            model_name='xrayimagingresult',
            name='ilo_classification',
            field=models.CharField(choices=[('0/0', '0/0'), ('0/1', '0/1'), ('1/0', '1/0'), ('1/1', '1/1'), ('1/2', '1/2'), ('2/1', '2/1'), ('2/2', '2/2'), ('2/3', '2/3'), ('3/2', '3/2'), ('3/3', '3/3')], default='0/0', max_length=10),
        ),
        migrations.AlterField(
            model_name='xrayimagingresult',
            name='imaging_type',
            field=models.CharField(choices=[('chest_xray', 'Chest X-Ray'), ('hrct', 'HRCT'), ('plain_film', 'Plain Film')], default='chest_xray', max_length=20),
        ),
        migrations.AlterField(
            model_name='xrayimagingresult',
            name='pneumoconiosis_type',
            field=models.CharField(blank=True, max_length=100),
        ),
        migrations.AddField(
            model_name='workerfeedback',
            name='acknowledged_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='feedback_acknowledged', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='workerfeedback',
            name='submitted_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='safety_feedback', to='occupational_health.worker'),
        ),
        migrations.AddField(
            model_name='vulnerabilityrecord',
            name='assigned_to',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='trainingcertification',
            name='employee',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='training_certifications', to='occupational_health.worker'),
        ),
        migrations.AddField(
            model_name='trainingcertification',
            name='training',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.safetytraining'),
        ),
        migrations.AddField(
            model_name='securityincident',
            name='assigned_to',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='security_incidents_assigned', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='securityincident',
            name='reported_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='security_incidents_reported', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='ohspolicy',
            name='approved_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ohs_policies_approved', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='managementreview',
            name='attendees',
            field=models.ManyToManyField(related_name='management_reviews_attended', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='managementreview',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='incidentinvestigation',
            name='corrective_action_owner',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='corrective_actions_owned', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='incidentinvestigation',
            name='incident',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='investigation', to='occupational_health.workplaceincident'),
        ),
        migrations.AddField(
            model_name='incidentinvestigation',
            name='investigation_team',
            field=models.ManyToManyField(related_name='incident_investigations', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='healthsurveillance',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='hazardregister',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='hazardregister',
            name='identified_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hazards_identified', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='hazardregister',
            name='work_site',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='occupational_health.worksite'),
        ),
        migrations.AddField(
            model_name='encryptionkeyrecord',
            name='created_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='encryption_keys_created', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='emergencyprocedure',
            name='approved_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='emergencyprocedure',
            name='work_site',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.worksite'),
        ),
        migrations.AddField(
            model_name='emergencydrill',
            name='conducted_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='emergencydrill',
            name='procedure',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='drills', to='occupational_health.emergencyprocedure'),
        ),
        migrations.AddField(
            model_name='contractorqualification',
            name='approved_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='contractorqualification',
            name='work_site',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.worksite'),
        ),
        migrations.AddField(
            model_name='complianceaudit',
            name='enterprise',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='auditlog',
            name='user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='accessrequest',
            name='approver',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='access_approvals', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='accessrequest',
            name='requested_enterprise',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='accessrequest',
            name='requester',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='access_requests', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='accesscontrol',
            name='enterprise',
            field=models.ForeignKey(blank=True, help_text='Specific enterprise; leave blank for all', null=True, on_delete=django.db.models.deletion.CASCADE, to='occupational_health.enterprise'),
        ),
        migrations.AddField(
            model_name='accesscontrol',
            name='granted_by',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='access_grants', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='accesscontrol',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='access_controls', to=settings.AUTH_USER_MODEL),
        ),
        migrations.AddField(
            model_name='accesscontrol',
            name='work_site',
            field=models.ForeignKey(blank=True, help_text='Specific site; leave blank for all', null=True, on_delete=django.db.models.deletion.CASCADE, to='occupational_health.worksite'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['user', '-timestamp'], name='occupationa_user_id_cac2e3_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['action', '-timestamp'], name='occupationa_action_f3f637_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['resource_type', '-timestamp'], name='occupationa_resourc_16c5fb_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='accesscontrol',
            unique_together={('user', 'resource_type', 'permission_type', 'enterprise', 'work_site')},
        ),
    ]
