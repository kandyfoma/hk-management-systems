# Generated by Django 4.2.28 on 2026-02-17 11:05

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Enterprise',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Nom Entreprise')),
                ('sector', models.CharField(choices=[('construction', 'üèóÔ∏è Construction (BTP)'), ('mining', '‚õèÔ∏è Mining'), ('oil_gas', 'üõ¢Ô∏è Oil & Gas'), ('manufacturing', 'üè≠ Manufacturing'), ('agriculture', 'üåæ Agriculture'), ('healthcare', 'üè• Healthcare'), ('transport_logistics', 'üöõ Transport & Logistics'), ('energy_utilities', '‚ö° Energy & Utilities'), ('hospitality', 'üè® Hospitality'), ('retail_commerce', 'üõí Retail & Commerce'), ('telecom_it', 'üì° Telecom & IT'), ('banking_finance', 'üè¶ Banking & Finance'), ('education', 'üéì Education'), ('government_admin', 'üèõÔ∏è Government & Administration'), ('ngo_international', 'ü§ù NGO & International Organizations'), ('other', 'üì¶ Other')], max_length=50, verbose_name="Secteur d'Activit√©")),
                ('rccm', models.CharField(max_length=50, unique=True, verbose_name='RCCM')),
                ('nif', models.CharField(max_length=20, unique=True, verbose_name='NIF')),
                ('address', models.TextField(verbose_name='Adresse')),
                ('contact_person', models.CharField(max_length=100, verbose_name='Personne Contact')),
                ('phone', models.CharField(max_length=15, verbose_name='T√©l√©phone')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('contract_start_date', models.DateField(verbose_name='D√©but Contrat')),
                ('contract_end_date', models.DateField(blank=True, null=True, verbose_name='Fin Contrat')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='enterprises_created', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Entreprise',
                'verbose_name_plural': 'Entreprises',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='MedicalExamination',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('exam_number', models.CharField(max_length=50, unique=True, verbose_name='Num√©ro Examen')),
                ('exam_type', models.CharField(choices=[('pre_employment', 'Pr√©-Embauche'), ('periodic', 'P√©riodique'), ('return_to_work', 'Reprise Travail'), ('special', 'Sp√©cial'), ('exit', 'Fin de Service'), ('night_work', 'Travail de Nuit'), ('pregnancy_related', 'Grossesse'), ('post_incident', 'Post-Incident')], max_length=20, verbose_name='Type Examen')),
                ('exam_date', models.DateField(verbose_name='Date Examen')),
                ('chief_complaint', models.TextField(blank=True, verbose_name='Motif Principal')),
                ('medical_history_review', models.TextField(blank=True, verbose_name='R√©vision Ant√©c√©dents')),
                ('examination_completed', models.BooleanField(default=False, verbose_name='Examen Termin√©')),
                ('results_summary', models.TextField(blank=True, verbose_name='R√©sum√© R√©sultats')),
                ('recommendations', models.TextField(blank=True, verbose_name='Recommandations')),
                ('follow_up_required', models.BooleanField(default=False, verbose_name='Suivi Requis')),
                ('follow_up_date', models.DateField(blank=True, null=True, verbose_name='Date Suivi')),
                ('next_periodic_exam', models.DateField(blank=True, null=True, verbose_name='Prochain Examen P√©riodique')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('examining_doctor', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='examinations_performed', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Examen M√©dical',
                'verbose_name_plural': 'Examens M√©dicaux',
                'ordering': ['-exam_date'],
            },
        ),
        migrations.CreateModel(
            name='OccupationalDiseaseType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Nom Maladie')),
                ('category', models.CharField(choices=[('respiratory', 'Maladies Respiratoires'), ('musculoskeletal', 'Troubles Musculo-squelettiques'), ('skin', 'Maladies Peau'), ('hearing', 'Troubles Auditifs'), ('mental', 'Troubles Mentaux'), ('cancer', 'Cancers Professionnels'), ('cardiovascular', 'Maladies Cardiovasculaires'), ('neurological', 'Troubles Neurologiques'), ('infectious', 'Maladies Infectieuses'), ('vision', 'Troubles Visuels'), ('voice', 'Troubles Vocaux'), ('reproductive', 'Troubles Reproductifs')], max_length=30, verbose_name='Cat√©gorie')),
                ('ilo_code', models.CharField(blank=True, max_length=20, verbose_name='Code ILO')),
                ('description', models.TextField(verbose_name='Description')),
                ('primary_sectors', models.JSONField(default=list, verbose_name='Secteurs Primaires')),
                ('associated_exposures', models.JSONField(default=list, verbose_name='Expositions Associ√©es')),
                ('diagnostic_criteria', models.TextField(blank=True, verbose_name='Crit√®res Diagnostiques')),
                ('latency_period', models.CharField(blank=True, max_length=100, verbose_name='P√©riode Latence')),
            ],
            options={
                'verbose_name': 'Type Maladie Professionnelle',
                'verbose_name_plural': 'Types Maladies Professionnelles',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Worker',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_id', models.CharField(max_length=50, unique=True, verbose_name='ID Employ√©')),
                ('first_name', models.CharField(max_length=100, verbose_name='Pr√©nom')),
                ('last_name', models.CharField(max_length=100, verbose_name='Nom')),
                ('date_of_birth', models.DateField(verbose_name='Date Naissance')),
                ('gender', models.CharField(choices=[('male', 'Masculin'), ('female', 'F√©minin'), ('other', 'Autre')], max_length=10, verbose_name='Sexe')),
                ('job_category', models.CharField(choices=[('construction_manager', 'Gestionnaire de Construction'), ('mason', 'Ma√ßon'), ('carpenter', 'Charpentier'), ('electrician_construction', '√âlectricien BTP'), ('heavy_equipment_operator', 'Op√©rateur √âquipement Lourd'), ('mine_manager', 'Gestionnaire de Mine'), ('underground_miner', 'Mineur Souterrain'), ('surface_miner', 'Mineur Surface'), ('drill_operator', 'Op√©rateur Forage'), ('mine_safety_officer', 'Agent S√©curit√© Mine'), ('drilling_engineer', 'Ing√©nieur Forage'), ('rig_worker', 'Ouvrier Plateforme'), ('pipeline_technician', 'Technicien Pipeline'), ('refinery_operator', 'Op√©rateur Raffinerie'), ('production_manager', 'Gestionnaire Production'), ('machine_operator', 'Op√©rateur Machine'), ('quality_inspector', 'Inspecteur Qualit√©'), ('maintenance_technician', 'Technicien Maintenance'), ('warehouse_worker', 'Ouvrier Entrep√¥t'), ('doctor', 'M√©decin'), ('nurse', 'Infirmier/√®re'), ('lab_technician', 'Technicien Laboratoire'), ('radiographer', 'Radiographe'), ('hospital_cleaner', 'Agent Nettoyage H√¥pital'), ('bank_manager', 'Directeur Banque'), ('teller', 'Caissier'), ('financial_analyst', 'Analyste Financier'), ('security_guard', 'Agent S√©curit√©'), ('it_specialist', 'Sp√©cialiste IT'), ('driver', 'Chauffeur'), ('teacher', 'Enseignant'), ('farmer', 'Agriculteur'), ('cook', 'Cuisinier'), ('office_worker', 'Employ√© Bureau'), ('sales_representative', 'Repr√©sentant Ventes'), ('other_job', 'Autre Emploi')], max_length=50, verbose_name='Cat√©gorie Emploi')),
                ('job_title', models.CharField(max_length=100, verbose_name='Titre Emploi')),
                ('hire_date', models.DateField(verbose_name='Date Embauche')),
                ('employment_status', models.CharField(choices=[('active', 'Actif'), ('on_leave', 'En Cong√©'), ('suspended', 'Suspendu'), ('terminated', 'Termin√©')], default='active', max_length=20, verbose_name='Statut Emploi')),
                ('phone', models.CharField(max_length=15, verbose_name='T√©l√©phone')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='Email')),
                ('address', models.TextField(verbose_name='Adresse')),
                ('emergency_contact_name', models.CharField(max_length=100, verbose_name='Contact Urgence Nom')),
                ('emergency_contact_phone', models.CharField(max_length=15, verbose_name='Contact Urgence T√©l')),
                ('exposure_risks', models.JSONField(default=list, help_text="Liste des risques d'exposition", verbose_name='Risques Exposition')),
                ('ppe_required', models.JSONField(default=list, help_text='Liste des PPE requis', verbose_name='PPE Requis')),
                ('ppe_provided', models.JSONField(default=list, help_text='Liste des PPE fournis', verbose_name='PPE Fourni')),
                ('allergies', models.TextField(blank=True, verbose_name='Allergies')),
                ('chronic_conditions', models.TextField(blank=True, verbose_name='Conditions Chroniques')),
                ('medications', models.TextField(blank=True, verbose_name='M√©dicaments')),
                ('prior_occupational_exposure', models.TextField(blank=True, verbose_name='Exposition Professionnelle Ant√©rieure')),
                ('current_fitness_status', models.CharField(choices=[('fit', 'Apte'), ('fit_with_restrictions', 'Apte avec Restrictions'), ('temporarily_unfit', 'Inapte Temporaire'), ('permanently_unfit', 'Inapte D√©finitif'), ('pending_evaluation', 'En Attente √âvaluation')], default='pending_evaluation', max_length=30, verbose_name='Statut Aptitude Actuel')),
                ('fitness_restrictions', models.TextField(blank=True, verbose_name='Restrictions Aptitude')),
                ('next_exam_due', models.DateField(blank=True, null=True, verbose_name='Prochain Examen D√ª')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='workers_created', to=settings.AUTH_USER_MODEL)),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='workers', to='occupational_health.enterprise')),
            ],
            options={
                'verbose_name': 'Travailleur',
                'verbose_name_plural': 'Travailleurs',
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.CreateModel(
            name='WorkSite',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Nom Site')),
                ('address', models.TextField(verbose_name='Adresse Site')),
                ('site_manager', models.CharField(max_length=100, verbose_name='Responsable Site')),
                ('phone', models.CharField(max_length=15, verbose_name='T√©l√©phone Site')),
                ('worker_count', models.PositiveIntegerField(default=0, verbose_name='Nombre Travailleurs')),
                ('is_remote_site', models.BooleanField(default=False, verbose_name='Site √âloign√©')),
                ('has_medical_facility', models.BooleanField(default=False, verbose_name='Dispensaire sur Site')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_sites', to='occupational_health.enterprise')),
            ],
            options={
                'verbose_name': 'Site de Travail',
                'verbose_name_plural': 'Sites de Travail',
                'ordering': ['enterprise__name', 'name'],
            },
        ),
        migrations.CreateModel(
            name='WorkplaceIncident',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('incident_number', models.CharField(max_length=50, unique=True, verbose_name='Num√©ro Incident')),
                ('category', models.CharField(choices=[('fatality', 'D√©c√®s'), ('lost_time_injury', 'Accident avec Arr√™t'), ('medical_treatment', 'Soins M√©dicaux'), ('first_aid', 'Premiers Secours'), ('near_miss', 'Presque Accident'), ('dangerous_occurrence', '√âv√©nement Dangereux'), ('occupational_disease_incident', 'Incident Maladie Professionnelle'), ('needle_stick', 'Piq√ªre Accidentelle'), ('patient_violence', 'Violence Patient'), ('road_accident', 'Accident Circulation'), ('robbery_violence', 'Vol/Violence'), ('chemical_spill', 'D√©versement Chimique'), ('fall_from_height', 'Chute Hauteur'), ('machinery_accident', 'Accident Machine'), ('explosion', 'Explosion'), ('fire', 'Incendie'), ('electrical_incident', 'Incident √âlectrique'), ('struck_by_object', 'Heurt√© par Objet'), ('repetitive_strain', 'L√©sion Efforts R√©p√©t√©s'), ('stress_related', 'Li√© au Stress'), ('other', 'Autre')], max_length=50, verbose_name='Cat√©gorie')),
                ('severity', models.PositiveIntegerField(choices=[(1, 'N√©gligeable - Premiers secours seulement'), (2, 'Mineur - Soins m√©dicaux mineurs'), (3, 'Mod√©r√© - Soins m√©dicaux significatifs'), (4, 'Majeur - Hospitalisation, arr√™t > 7 jours'), (5, 'Catastrophique - Handicap permanent ou d√©c√®s')], verbose_name='S√©v√©rit√©')),
                ('incident_date', models.DateField(verbose_name='Date Incident')),
                ('incident_time', models.TimeField(verbose_name='Heure Incident')),
                ('location_description', models.TextField(verbose_name='Description Lieu')),
                ('description', models.TextField(verbose_name='Description Incident')),
                ('immediate_cause', models.TextField(verbose_name='Cause Imm√©diate')),
                ('equipment_involved', models.CharField(blank=True, max_length=200, verbose_name='√âquipement Impliqu√©')),
                ('body_parts_affected', models.JSONField(default=list, verbose_name='Parties Corps Affect√©es')),
                ('injury_type', models.CharField(blank=True, max_length=100, verbose_name='Type Blessure')),
                ('property_damage', models.BooleanField(default=False, verbose_name='Dommages Mat√©riels')),
                ('property_damage_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Co√ªt Dommages ($)')),
                ('first_aid_given', models.BooleanField(default=False, verbose_name='Premiers Secours Donn√©s')),
                ('first_aid_by', models.CharField(blank=True, max_length=100, verbose_name='Premiers Secours Par')),
                ('medical_treatment_required', models.BooleanField(default=False, verbose_name='Soins M√©dicaux Requis')),
                ('hospital_name', models.CharField(blank=True, max_length=200, verbose_name='Nom H√¥pital')),
                ('work_days_lost', models.PositiveIntegerField(default=0, verbose_name='Jours Arr√™t')),
                ('return_to_work_date', models.DateField(blank=True, null=True, verbose_name='Date Retour Travail')),
                ('restricted_work_days', models.PositiveIntegerField(default=0, verbose_name='Jours Travail Restreint')),
                ('investigated', models.BooleanField(default=False, verbose_name='Enqu√™t√©')),
                ('investigation_completed_date', models.DateField(blank=True, null=True, verbose_name='Enqu√™te Termin√©e le')),
                ('root_cause_analysis', models.TextField(blank=True, verbose_name='Analyse Cause Racine')),
                ('immediate_actions_taken', models.TextField(verbose_name='Actions Imm√©diates')),
                ('corrective_actions_planned', models.TextField(blank=True, verbose_name='Actions Correctives Pr√©vues')),
                ('reportable_to_authorities', models.BooleanField(default=False, verbose_name='D√©clarable Autorit√©s')),
                ('reported_to_cnss', models.BooleanField(default=False, verbose_name='D√©clar√© CNSS')),
                ('reported_to_labour_inspection', models.BooleanField(default=False, verbose_name='D√©clar√© Inspection Travail')),
                ('reporting_date', models.DateField(blank=True, null=True, verbose_name='Date D√©claration')),
                ('status', models.CharField(choices=[('reported', 'Signal√©'), ('investigating', 'En Enqu√™te'), ('closed', 'Ferm√©'), ('follow_up', 'Suivi')], default='reported', max_length=20, verbose_name='Statut')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incidents', to='occupational_health.enterprise')),
                ('injured_workers', models.ManyToManyField(blank=True, related_name='incidents_involved', to='occupational_health.worker')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='incidents_reported', to=settings.AUTH_USER_MODEL)),
                ('witnesses', models.ManyToManyField(blank=True, related_name='incidents_witnessed', to='occupational_health.worker')),
                ('work_site', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='occupational_health.worksite')),
            ],
            options={
                'verbose_name': 'Incident Travail',
                'verbose_name_plural': 'Incidents Travail',
                'ordering': ['-incident_date'],
            },
        ),
        migrations.AddField(
            model_name='worker',
            name='work_site',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='occupational_health.worksite'),
        ),
        migrations.CreateModel(
            name='VitalSigns',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('systolic_bp', models.PositiveIntegerField(verbose_name='PA Systolique (mmHg)')),
                ('diastolic_bp', models.PositiveIntegerField(verbose_name='PA Diastolique (mmHg)')),
                ('heart_rate', models.PositiveIntegerField(verbose_name='Fr√©quence Cardiaque (bpm)')),
                ('respiratory_rate', models.PositiveIntegerField(blank=True, null=True, verbose_name='Fr√©quence Respiratoire')),
                ('temperature', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True, verbose_name='Temp√©rature (¬∞C)')),
                ('height', models.DecimalField(decimal_places=1, max_digits=5, verbose_name='Taille (cm)')),
                ('weight', models.DecimalField(decimal_places=1, max_digits=5, verbose_name='Poids (kg)')),
                ('waist_circumference', models.DecimalField(blank=True, decimal_places=1, max_digits=5, null=True, verbose_name='Tour Taille (cm)')),
                ('pain_scale', models.PositiveIntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(10)], verbose_name='√âchelle Douleur (0-10)')),
                ('pain_location', models.CharField(blank=True, max_length=100, verbose_name='Localisation Douleur')),
                ('recorded_at', models.DateTimeField(auto_now_add=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='vital_signs', to='occupational_health.medicalexamination')),
                ('recorded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='vital_signs_recorded', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Signes Vitaux',
                'verbose_name_plural': 'Signes Vitaux',
            },
        ),
        migrations.CreateModel(
            name='VisionTestResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('right_eye_uncorrected', models.CharField(blank=True, max_length=10, verbose_name='OD Non Corrig√©')),
                ('right_eye_corrected', models.CharField(blank=True, max_length=10, verbose_name='OD Corrig√©')),
                ('left_eye_uncorrected', models.CharField(blank=True, max_length=10, verbose_name='OG Non Corrig√©')),
                ('left_eye_corrected', models.CharField(blank=True, max_length=10, verbose_name='OG Corrig√©')),
                ('both_eyes', models.CharField(blank=True, max_length=10, verbose_name='Binoculaire')),
                ('color_vision_test', models.CharField(choices=[('normal', 'Normal'), ('deficient', 'D√©ficient'), ('not_tested', 'Non Test√©')], default='not_tested', max_length=20, verbose_name='Vision Couleurs')),
                ('near_vision_test', models.CharField(blank=True, max_length=10, verbose_name='Vision Pr√®s')),
                ('requires_correction', models.BooleanField(default=False, verbose_name='Correction Requise')),
                ('computer_vision_syndrome', models.BooleanField(default=False, verbose_name='Syndrome Vision Ordinateur')),
                ('recommendations', models.TextField(blank=True, verbose_name='Recommandations')),
                ('test_date', models.DateTimeField(auto_now_add=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='vision_test', to='occupational_health.medicalexamination')),
                ('tested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Test Vision',
                'verbose_name_plural': 'Tests Vision',
            },
        ),
        migrations.CreateModel(
            name='SpirometryResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fvc_pre', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='CVF Pr√© (L)')),
                ('fev1_pre', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='VEMS Pr√© (L)')),
                ('fev1_fvc_ratio_pre', models.DecimalField(blank=True, decimal_places=1, max_digits=5, null=True, verbose_name='VEMS/CVF Pr√© (%)')),
                ('pef_pre', models.PositiveIntegerField(blank=True, null=True, verbose_name='DEP Pr√© (L/min)')),
                ('fvc_post', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='CVF Post (L)')),
                ('fev1_post', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='VEMS Post (L)')),
                ('fev1_fvc_ratio_post', models.DecimalField(blank=True, decimal_places=1, max_digits=5, null=True, verbose_name='VEMS/CVF Post (%)')),
                ('spirometry_interpretation', models.CharField(blank=True, choices=[('normal', 'Normal'), ('restrictive', 'Syndrome Restrictif'), ('obstructive', 'Syndrome Obstructif'), ('mixed', 'Mixte'), ('small_airways', 'Petites Voies A√©riennes')], max_length=50, verbose_name='Interpr√©tation')),
                ('occupational_lung_disease_suspected', models.BooleanField(default=False, verbose_name='Pneumopathie Professionnelle Suspect√©e')),
                ('recommendations', models.TextField(blank=True, verbose_name='Recommandations')),
                ('test_date', models.DateTimeField(auto_now_add=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='spirometry', to='occupational_health.medicalexamination')),
                ('tested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Spirom√©trie',
                'verbose_name_plural': 'Spirom√©tries',
            },
        ),
        migrations.CreateModel(
            name='PPEItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ppe_type', models.CharField(choices=[('hard_hat', 'Casque de S√©curit√©'), ('safety_glasses', 'Lunettes S√©curit√©'), ('hearing_protection', 'Protection Auditive'), ('respirator', 'Appareil Respiratoire'), ('face_mask', 'Masque Facial'), ('gloves', 'Gants'), ('steel_toe_boots', 'Chaussures S√©curit√©'), ('harness', 'Harnais'), ('reflective_vest', 'Gilet R√©fl√©chissant'), ('chemical_suit', 'Combinaison Chimique'), ('lab_coat', 'Blouse Laboratoire'), ('face_shield', '√âcran Facial'), ('radiation_badge', 'Badge Radiation'), ('ergonomic_chair', 'Chaise Ergonomique'), ('wrist_rest', 'Repose-Poignet'), ('sun_protection', 'Protection Solaire'), ('boots', 'Bottes'), ('none_required', 'Aucun PPE Requis')], max_length=50, verbose_name='Type PPE')),
                ('brand_model', models.CharField(blank=True, max_length=100, verbose_name='Marque/Mod√®le')),
                ('serial_number', models.CharField(blank=True, max_length=100, verbose_name='Num√©ro S√©rie')),
                ('size', models.CharField(blank=True, max_length=20, verbose_name='Taille')),
                ('issue_date', models.DateField(verbose_name='Date Attribution')),
                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='Date Expiration')),
                ('last_inspection_date', models.DateField(blank=True, null=True, verbose_name='Derni√®re Inspection')),
                ('next_inspection_date', models.DateField(blank=True, null=True, verbose_name='Prochaine Inspection')),
                ('condition', models.CharField(choices=[('new', 'Neuf'), ('good', 'Bon √âtat'), ('worn', 'Us√©'), ('damaged', 'Endommag√©'), ('expired', 'Expir√©')], default='new', max_length=20, verbose_name='√âtat')),
                ('training_provided', models.BooleanField(default=False, verbose_name='Formation Donn√©e')),
                ('training_date', models.DateField(blank=True, null=True, verbose_name='Date Formation')),
                ('compliance_checked', models.BooleanField(default=False, verbose_name='Conformit√© V√©rifi√©e')),
                ('last_compliance_check', models.DateField(blank=True, null=True, verbose_name='Derni√®re V√©rif Conformit√©')),
                ('non_compliance_notes', models.TextField(blank=True, verbose_name='Notes Non-Conformit√©')),
                ('replaced', models.BooleanField(default=False, verbose_name='Remplac√©')),
                ('replacement_date', models.DateField(blank=True, null=True, verbose_name='Date Remplacement')),
                ('replacement_reason', models.TextField(blank=True, verbose_name='Raison Remplacement')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ppe_assigned', to=settings.AUTH_USER_MODEL)),
                ('worker', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ppe_items', to='occupational_health.worker')),
            ],
            options={
                'verbose_name': '√âquipement PPE',
                'verbose_name_plural': '√âquipements PPE',
                'ordering': ['worker', 'ppe_type'],
            },
        ),
        migrations.CreateModel(
            name='PhysicalExamination',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('general_appearance', models.TextField(blank=True, verbose_name='Aspect G√©n√©ral')),
                ('head_neck', models.TextField(blank=True, verbose_name='T√™te et Cou')),
                ('cardiovascular', models.TextField(blank=True, verbose_name='Cardiovasculaire')),
                ('respiratory', models.TextField(blank=True, verbose_name='Respiratoire')),
                ('abdominal', models.TextField(blank=True, verbose_name='Abdominal')),
                ('musculoskeletal', models.TextField(blank=True, verbose_name='Musculo-squelettique')),
                ('neurological', models.TextField(blank=True, verbose_name='Neurologique')),
                ('skin', models.TextField(blank=True, verbose_name='Peau')),
                ('ent', models.TextField(blank=True, verbose_name='ORL')),
                ('physical_exam_normal', models.BooleanField(default=True, verbose_name='Examen Physique Normal')),
                ('abnormal_findings_summary', models.TextField(blank=True, verbose_name='R√©sum√© Anomalies')),
                ('performed_at', models.DateTimeField(auto_now_add=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='physical_exam', to='occupational_health.medicalexamination')),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Examen Physique',
                'verbose_name_plural': 'Examens Physiques',
            },
        ),
        migrations.CreateModel(
            name='OccupationalDisease',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('case_number', models.CharField(max_length=50, unique=True, verbose_name='Num√©ro Cas')),
                ('diagnosis_date', models.DateField(verbose_name='Date Diagnostic')),
                ('exposure_start_date', models.DateField(blank=True, null=True, verbose_name='D√©but Exposition')),
                ('exposure_end_date', models.DateField(blank=True, null=True, verbose_name='Fin Exposition')),
                ('exposure_duration_years', models.DecimalField(blank=True, decimal_places=1, max_digits=5, null=True, verbose_name='Dur√©e Exposition (ann√©es)')),
                ('exposure_description', models.TextField(verbose_name='Description Exposition')),
                ('causal_determination', models.CharField(choices=[('definite', 'Certain'), ('probable', 'Probable'), ('possible', 'Possible'), ('unlikely', 'Peu Probable'), ('not_related', 'Non Li√©')], max_length=20, verbose_name='D√©termination Causale')),
                ('causal_assessment_notes', models.TextField(verbose_name='Notes √âvaluation Causale')),
                ('symptoms', models.TextField(verbose_name='Sympt√¥mes')),
                ('clinical_findings', models.TextField(verbose_name='R√©sultats Cliniques')),
                ('diagnostic_tests', models.TextField(blank=True, verbose_name='Tests Diagnostiques')),
                ('severity_level', models.CharField(choices=[('mild', 'L√©ger'), ('moderate', 'Mod√©r√©'), ('severe', 'S√©v√®re'), ('critical', 'Critique')], max_length=20, verbose_name='Niveau S√©v√©rit√©')),
                ('functional_impairment', models.TextField(blank=True, verbose_name='D√©ficience Fonctionnelle')),
                ('prognosis', models.TextField(blank=True, verbose_name='Pronostic')),
                ('reported_to_cnss', models.BooleanField(default=False, verbose_name='D√©clar√© CNSS')),
                ('cnss_report_date', models.DateField(blank=True, null=True, verbose_name='Date D√©claration CNSS')),
                ('compensation_awarded', models.BooleanField(default=False, verbose_name='Indemnisation Accord√©e')),
                ('compensation_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='Montant Indemnisation')),
                ('treatment_plan', models.TextField(blank=True, verbose_name='Plan Traitement')),
                ('work_ability_impact', models.TextField(verbose_name='Impact Capacit√© Travail')),
                ('return_to_work_possible', models.BooleanField(default=True, verbose_name='Retour Travail Possible')),
                ('work_restrictions_needed', models.TextField(blank=True, verbose_name='Restrictions Travail')),
                ('case_status', models.CharField(choices=[('active', 'Actif'), ('resolved', 'R√©solu'), ('chronic', 'Chronique'), ('fatal', 'Fatal')], default='active', max_length=20, verbose_name='Statut Cas')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('diagnosing_physician', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='diseases_diagnosed', to=settings.AUTH_USER_MODEL)),
                ('disease_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='occupational_health.occupationaldiseasetype')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='diseases_reported', to=settings.AUTH_USER_MODEL)),
                ('worker', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='occupational_diseases', to='occupational_health.worker')),
            ],
            options={
                'verbose_name': 'Maladie Professionnelle',
                'verbose_name_plural': 'Maladies Professionnelles',
                'ordering': ['-diagnosis_date'],
            },
        ),
        migrations.CreateModel(
            name='MentalHealthScreening',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ghq12_score', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(36)], verbose_name='Score GHQ-12')),
                ('burnout_risk', models.CharField(choices=[('low', 'Faible'), ('moderate', 'Mod√©r√©'), ('high', '√âlev√©'), ('critical', 'Critique'), ('not_assessed', 'Non √âvalu√©')], default='not_assessed', max_length=20, verbose_name='Risque Burnout')),
                ('work_overload', models.BooleanField(default=False, verbose_name='Surcharge Travail')),
                ('lack_control', models.BooleanField(default=False, verbose_name='Manque Contr√¥le')),
                ('poor_social_support', models.BooleanField(default=False, verbose_name='Faible Soutien Social')),
                ('work_life_imbalance', models.BooleanField(default=False, verbose_name='D√©s√©quilibre Vie Pro-Perso')),
                ('job_insecurity', models.BooleanField(default=False, verbose_name='Ins√©curit√© Emploi')),
                ('workplace_harassment', models.BooleanField(default=False, verbose_name='Harc√®lement')),
                ('sleep_quality', models.CharField(blank=True, choices=[('excellent', 'Excellente'), ('good', 'Bonne'), ('fair', 'Correcte'), ('poor', 'Mauvaise'), ('very_poor', 'Tr√®s Mauvaise')], max_length=20, verbose_name='Qualit√© Sommeil')),
                ('chronic_fatigue', models.BooleanField(default=False, verbose_name='Fatigue Chronique')),
                ('alcohol_risk', models.CharField(choices=[('none', 'Aucun'), ('low', 'Faible'), ('moderate', 'Mod√©r√©'), ('high', '√âlev√©')], default='none', max_length=20, verbose_name='Risque Alcool')),
                ('substance_concern', models.BooleanField(default=False, verbose_name='Pr√©occupation Substances')),
                ('psychological_support_recommended', models.BooleanField(default=False, verbose_name='Soutien Psychologique Recommand√©')),
                ('fitness_impact', models.TextField(blank=True, verbose_name='Impact sur Aptitude')),
                ('recommendations', models.TextField(blank=True, verbose_name='Recommandations')),
                ('referred_to_psychologist', models.BooleanField(default=False, verbose_name='R√©f√©r√© Psychologue')),
                ('referred_to_psychiatrist', models.BooleanField(default=False, verbose_name='R√©f√©r√© Psychiatre')),
                ('referred_to_eap', models.BooleanField(default=False, verbose_name='R√©f√©r√© Programme Aide')),
                ('assessment_date', models.DateTimeField(auto_now_add=True)),
                ('assessed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='mental_health_screening', to='occupational_health.medicalexamination')),
            ],
            options={
                'verbose_name': 'D√©pistage Sant√© Mentale',
                'verbose_name_plural': 'D√©pistages Sant√© Mentale',
            },
        ),
        migrations.AddField(
            model_name='medicalexamination',
            name='worker',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='medical_examinations', to='occupational_health.worker'),
        ),
        migrations.CreateModel(
            name='HazardIdentification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('hazard_description', models.TextField(verbose_name='Description Danger')),
                ('hazard_type', models.CharField(choices=[('physical', 'Physique'), ('chemical', 'Chimique'), ('biological', 'Biologique'), ('psychosocial', 'Psychosocial'), ('ergonomic', 'Ergonomique'), ('safety', 'S√©curit√©')], max_length=20, verbose_name='Type Danger')),
                ('location', models.CharField(max_length=200, verbose_name='Lieu')),
                ('activities_affected', models.TextField(verbose_name='Activit√©s Affect√©es')),
                ('probability', models.PositiveIntegerField(choices=[(1, 'Tr√®s Improbable'), (2, 'Improbable'), (3, 'Possible'), (4, 'Probable'), (5, 'Tr√®s Probable')], verbose_name='Probabilit√©')),
                ('severity', models.PositiveIntegerField(choices=[(1, 'N√©gligeable'), (2, 'Mineur'), (3, 'Mod√©r√©'), (4, 'Majeur'), (5, 'Catastrophique')], verbose_name='Gravit√©')),
                ('existing_controls', models.TextField(verbose_name='Contr√¥les Existants')),
                ('control_effectiveness', models.CharField(choices=[('very_effective', 'Tr√®s Efficace'), ('effective', 'Efficace'), ('partially_effective', 'Partiellement Efficace'), ('ineffective', 'Inefficace')], max_length=20, verbose_name='Efficacit√© Contr√¥les')),
                ('residual_probability', models.PositiveIntegerField(choices=[(1, 'Tr√®s Improbable'), (2, 'Improbable'), (3, 'Possible'), (4, 'Probable'), (5, 'Tr√®s Probable')], verbose_name='Probabilit√© R√©siduelle')),
                ('residual_severity', models.PositiveIntegerField(choices=[(1, 'N√©gligeable'), (2, 'Mineur'), (3, 'Mod√©r√©'), (4, 'Majeur'), (5, 'Catastrophique')], verbose_name='Gravit√© R√©siduelle')),
                ('elimination_possible', models.BooleanField(default=False, verbose_name='√âlimination Possible')),
                ('substitution_recommendations', models.TextField(blank=True, verbose_name='Recommandations Substitution')),
                ('engineering_controls', models.TextField(blank=True, verbose_name='Contr√¥les Ing√©nierie')),
                ('administrative_controls', models.TextField(blank=True, verbose_name='Contr√¥les Administratifs')),
                ('ppe_recommendations', models.JSONField(default=list, verbose_name='Recommandations PPE')),
                ('risk_level', models.CharField(choices=[('low', 'Faible (1-4)'), ('medium', 'Moyen (5-9)'), ('high', '√âlev√© (10-15)'), ('critical', 'Critique (16-25)')], max_length=20, verbose_name='Niveau Risque')),
                ('action_required', models.BooleanField(default=True, verbose_name='Action Requise')),
                ('priority', models.CharField(choices=[('low', 'Faible'), ('medium', 'Moyenne'), ('high', '√âlev√©e'), ('urgent', 'Urgente')], max_length=20, verbose_name='Priorit√©')),
                ('assessment_date', models.DateField(verbose_name='Date √âvaluation')),
                ('review_date', models.DateField(verbose_name='Date R√©vision')),
                ('next_review_date', models.DateField(verbose_name='Prochaine R√©vision')),
                ('status', models.CharField(choices=[('draft', 'Brouillon'), ('approved', 'Approuv√©'), ('implemented', 'Impl√©ment√©'), ('reviewed', 'R√©vis√©')], default='draft', max_length=20, verbose_name='Statut')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hazards_approved', to=settings.AUTH_USER_MODEL)),
                ('assessed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hazards_assessed', to=settings.AUTH_USER_MODEL)),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hazard_identifications', to='occupational_health.enterprise')),
                ('work_site', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='occupational_health.worksite')),
                ('workers_exposed', models.ManyToManyField(blank=True, related_name='hazard_exposures', to='occupational_health.worker')),
            ],
            options={
                'verbose_name': 'Identification Danger',
                'verbose_name_plural': 'Identifications Dangers',
                'ordering': ['-assessment_date'],
            },
        ),
        migrations.CreateModel(
            name='FitnessCertificate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('certificate_number', models.CharField(max_length=50, unique=True, verbose_name='Num√©ro Certificat')),
                ('fitness_decision', models.CharField(choices=[('fit', 'Apte'), ('fit_with_restrictions', 'Apte avec Restrictions'), ('temporarily_unfit', 'Inapte Temporaire'), ('permanently_unfit', 'Inapte D√©finitif')], max_length=30, verbose_name='D√©cision Aptitude')),
                ('decision_rationale', models.TextField(verbose_name='Justification D√©cision')),
                ('restrictions', models.TextField(blank=True, help_text='Ex: pas de travail en hauteur, poste adapt√©', verbose_name='Restrictions')),
                ('work_limitations', models.TextField(blank=True, verbose_name='Limitations Travail')),
                ('issue_date', models.DateField(verbose_name='Date √âmission')),
                ('valid_until', models.DateField(verbose_name="Valide Jusqu'√†")),
                ('requires_follow_up', models.BooleanField(default=False, verbose_name='Suivi Requis')),
                ('follow_up_frequency_months', models.PositiveIntegerField(blank=True, null=True, verbose_name='Fr√©quence Suivi (mois)')),
                ('follow_up_instructions', models.TextField(blank=True, verbose_name='Instructions Suivi')),
                ('is_active', models.BooleanField(default=True, verbose_name='Actif')),
                ('revoked_date', models.DateField(blank=True, null=True, verbose_name='Date R√©vocation')),
                ('revocation_reason', models.TextField(blank=True, verbose_name='Raison R√©vocation')),
                ('digital_signature', models.TextField(blank=True, verbose_name='Signature Num√©rique')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='fitness_certificate', to='occupational_health.medicalexamination')),
                ('issued_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='certificates_issued', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Certificat Aptitude',
                'verbose_name_plural': 'Certificats Aptitude',
                'ordering': ['-issue_date'],
            },
        ),
        migrations.CreateModel(
            name='ErgonomicAssessment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('workstation_type', models.CharField(choices=[('computer_desk', 'Bureau Informatique'), ('production_line', 'Ligne Production'), ('standing_work', 'Travail Debout'), ('driving', 'Conduite'), ('manual_handling', 'Manutention'), ('mixed', 'Mixte'), ('other', 'Autre')], max_length=30, verbose_name='Type Poste')),
                ('screen_distance', models.PositiveIntegerField(blank=True, null=True, verbose_name='Distance √âcran (cm)')),
                ('screen_height_appropriate', models.BooleanField(default=False, verbose_name='Hauteur √âcran Appropri√©e')),
                ('keyboard_position', models.CharField(choices=[('appropriate', 'Appropri√©e'), ('too_high', 'Trop Haut'), ('too_low', 'Trop Bas'), ('not_applicable', 'N/A')], default='not_applicable', max_length=20, verbose_name='Position Clavier')),
                ('chair_adjustable', models.BooleanField(default=False, verbose_name='Chaise Ajustable')),
                ('lumbar_support', models.BooleanField(default=False, verbose_name='Support Lombaire')),
                ('prolonged_sitting', models.BooleanField(default=False, verbose_name='Station Assise Prolong√©e')),
                ('prolonged_standing', models.BooleanField(default=False, verbose_name='Station Debout Prolong√©e')),
                ('repetitive_tasks', models.BooleanField(default=False, verbose_name='T√¢ches R√©p√©titives')),
                ('awkward_postures', models.BooleanField(default=False, verbose_name='Postures Inconfortables')),
                ('manual_lifting', models.BooleanField(default=False, verbose_name='Soul√®vement Manuel')),
                ('vibration_exposure', models.BooleanField(default=False, verbose_name='Exposition Vibrations')),
                ('rula_score', models.PositiveIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(7)], verbose_name='Score RULA')),
                ('neck_pain', models.BooleanField(default=False, verbose_name='Douleur Cou')),
                ('shoulder_pain', models.BooleanField(default=False, verbose_name='Douleur √âpaule')),
                ('back_pain', models.BooleanField(default=False, verbose_name='Douleur Dos')),
                ('wrist_pain', models.BooleanField(default=False, verbose_name='Douleur Poignet')),
                ('leg_pain', models.BooleanField(default=False, verbose_name='Douleur Jambes')),
                ('ergonomic_risk_level', models.CharField(choices=[('low', 'Faible'), ('moderate', 'Mod√©r√©'), ('high', '√âlev√©'), ('very_high', 'Tr√®s √âlev√©')], max_length=20, verbose_name='Niveau Risque Ergonomique')),
                ('workstation_modifications_needed', models.BooleanField(default=False, verbose_name='Modifications Poste Requises')),
                ('equipment_recommendations', models.TextField(blank=True, verbose_name='Recommandations √âquipement')),
                ('task_modifications', models.TextField(blank=True, verbose_name='Modifications T√¢ches')),
                ('training_recommended', models.TextField(blank=True, verbose_name='Formation Recommand√©e')),
                ('assessment_date', models.DateTimeField(auto_now_add=True)),
                ('assessed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='ergonomic_assessment', to='occupational_health.medicalexamination')),
            ],
            options={
                'verbose_name': '√âvaluation Ergonomique',
                'verbose_name_plural': '√âvaluations Ergonomiques',
            },
        ),
        migrations.CreateModel(
            name='AudiometryResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('right_ear_500hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 500 Hz (dB HL)')),
                ('right_ear_1000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 1000 Hz (dB HL)')),
                ('right_ear_2000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 2000 Hz (dB HL)')),
                ('right_ear_3000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 3000 Hz (dB HL)')),
                ('right_ear_4000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 4000 Hz (dB HL)')),
                ('right_ear_6000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 6000 Hz (dB HL)')),
                ('right_ear_8000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OD 8000 Hz (dB HL)')),
                ('left_ear_500hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 500 Hz (dB HL)')),
                ('left_ear_1000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 1000 Hz (dB HL)')),
                ('left_ear_2000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 2000 Hz (dB HL)')),
                ('left_ear_3000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 3000 Hz (dB HL)')),
                ('left_ear_4000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 4000 Hz (dB HL)')),
                ('left_ear_6000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 6000 Hz (dB HL)')),
                ('left_ear_8000hz', models.PositiveIntegerField(blank=True, null=True, verbose_name='OG 8000 Hz (dB HL)')),
                ('test_conditions', models.TextField(blank=True, verbose_name='Conditions Test')),
                ('hearing_loss_classification', models.CharField(blank=True, choices=[('normal', 'Normal (‚â§25 dB HL)'), ('mild', 'L√©g√®re (26-40 dB HL)'), ('moderate', 'Mod√©r√©e (41-60 dB HL)'), ('severe', 'S√©v√®re (61-80 dB HL)'), ('profound', 'Profonde (>80 dB HL)')], max_length=50, verbose_name='Classification')),
                ('noise_induced_probable', models.BooleanField(default=False, verbose_name='NIHL Probable')),
                ('recommendations', models.TextField(blank=True, verbose_name='Recommandations')),
                ('test_date', models.DateTimeField(auto_now_add=True)),
                ('examination', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='audiometry', to='occupational_health.medicalexamination')),
                ('tested_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Audiom√©trie',
                'verbose_name_plural': 'Audiom√©tries',
            },
        ),
        migrations.AlterUniqueTogether(
            name='worker',
            unique_together={('enterprise', 'employee_id')},
        ),
        migrations.CreateModel(
            name='SiteHealthMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('year', models.PositiveIntegerField(verbose_name='Ann√©e')),
                ('month', models.PositiveIntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)], verbose_name='Mois')),
                ('total_workers', models.PositiveIntegerField(verbose_name='Nombre Total Travailleurs')),
                ('total_hours_worked', models.PositiveIntegerField(verbose_name='Heures Totales Travaill√©es')),
                ('fatalities', models.PositiveIntegerField(default=0, verbose_name='D√©c√®s')),
                ('lost_time_injuries', models.PositiveIntegerField(default=0, verbose_name='Accidents avec Arr√™t')),
                ('medical_treatment_cases', models.PositiveIntegerField(default=0, verbose_name='Cas Soins M√©dicaux')),
                ('first_aid_cases', models.PositiveIntegerField(default=0, verbose_name='Cas Premiers Secours')),
                ('near_misses', models.PositiveIntegerField(default=0, verbose_name='Presque Accidents')),
                ('total_lost_days', models.PositiveIntegerField(default=0, verbose_name='Total Jours Perdus')),
                ('new_occupational_diseases', models.PositiveIntegerField(default=0, verbose_name='Nouvelles Maladies Professionnelles')),
                ('total_active_diseases', models.PositiveIntegerField(default=0, verbose_name='Total Maladies Actives')),
                ('examinations_due', models.PositiveIntegerField(default=0, verbose_name='Examens Dus')),
                ('examinations_completed', models.PositiveIntegerField(default=0, verbose_name='Examens Termin√©s')),
                ('overdue_examinations', models.PositiveIntegerField(default=0, verbose_name='Examens en Retard')),
                ('workers_fit', models.PositiveIntegerField(default=0, verbose_name='Travailleurs Aptes')),
                ('workers_fit_with_restrictions', models.PositiveIntegerField(default=0, verbose_name='Travailleurs Aptes avec Restrictions')),
                ('workers_temporarily_unfit', models.PositiveIntegerField(default=0, verbose_name='Travailleurs Inaptes Temporaires')),
                ('workers_permanently_unfit', models.PositiveIntegerField(default=0, verbose_name='Travailleurs Inaptes D√©finitifs')),
                ('ppe_compliance_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='Taux Conformit√© PPE (%)')),
                ('safety_training_completed', models.PositiveIntegerField(default=0, verbose_name='Formations S√©curit√© Termin√©es')),
                ('health_awareness_sessions', models.PositiveIntegerField(default=0, verbose_name='Sessions Sensibilisation Sant√©')),
                ('total_absence_days', models.PositiveIntegerField(default=0, verbose_name='Total Jours Absence')),
                ('sick_leave_days', models.PositiveIntegerField(default=0, verbose_name='Jours Cong√© Maladie')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('compiled_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='metrics_compiled', to=settings.AUTH_USER_MODEL)),
                ('enterprise', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='health_metrics', to='occupational_health.enterprise')),
                ('work_site', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='occupational_health.worksite')),
            ],
            options={
                'verbose_name': 'M√©triques Sant√© Site',
                'verbose_name_plural': 'M√©triques Sant√© Sites',
                'ordering': ['-year', '-month'],
                'unique_together': {('enterprise', 'work_site', 'year', 'month')},
            },
        ),
    ]
